{"version":3,"file":"CommentOptions.js","sources":["components/CommentOptions.vue","../../HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/QzovVXNlcnMvQURNSU4vRG9jdW1lbnRzL0hCdWlsZGVyUHJvamVjdHMv5a6d5a6d54Wn54mHL2NvbXBvbmVudHMvQ29tbWVudE9wdGlvbnMudnVl"],"sourcesContent":["<template>\n  <view>\n    <!-- 长按评论后的操作菜单 -->\n    <uni-popup ref=\"commentOptionsPopup\" type=\"bottom\">\n      <view class=\"popup-content\">\n        <view class=\"popup-item\" @click=\"handleEdit\">\n          <text class=\"popup-text\">修改</text>\n        </view>\n        <view class=\"popup-item\" @click=\"handleDelete\">\n          <text class=\"popup-text\">删除</text>\n        </view>\n        <view class=\"popup-item cancel\" @click=\"closePopup\">\n          <text class=\"popup-text\">取消</text>\n        </view>\n      </view>\n    </uni-popup>\n    \n    <!-- 修改评论的弹出框 -->\n    <uni-popup ref=\"editCommentPopup\" type=\"dialog\">\n      <uni-popup-dialog\n        title=\"修改评论\"\n        :value=\"editContent\"\n        placeholder=\"请输入评论内容\"\n        :before-close=\"true\"\n        @confirm=\"confirmEdit\"\n        @close=\"closeEditPopup\"\n        mode=\"input\"\n      ></uni-popup-dialog>\n    </uni-popup>\n    \n    <!-- 删除确认弹出框 -->\n    <uni-popup ref=\"deleteConfirmPopup\" type=\"dialog\">\n      <uni-popup-dialog\n        title=\"确认删除\"\n        content=\"确定要删除这条评论吗？删除后将无法恢复。\"\n        :before-close=\"true\"\n        @confirm=\"confirmDelete\"\n        @close=\"closeDeletePopup\"\n        confirmText=\"删除\"\n        cancelText=\"取消\"\n      ></uni-popup-dialog>\n    </uni-popup>\n  </view>\n</template>\n\n<script setup>\nimport { ref, nextTick, defineProps, defineEmits, defineExpose } from 'vue';\n\nconst props = defineProps({\n  commentData: {\n    type: Object,\n    default: () => ({})\n  }\n});\n\nconst emit = defineEmits(['update', 'delete']);\n\n// 弹窗引用\nconst commentOptionsPopup = ref(null);\nconst editCommentPopup = ref(null);\nconst deleteConfirmPopup = ref(null);\n\n// 修改内容\nconst editContent = ref('');\n\n// 当前操作的评论\nconst currentComment = ref(null);\n\n// 打开评论选项弹窗\nconst open = (comment) => {\n  currentComment.value = comment;\n  editContent.value = comment.content || '';\n  commentOptionsPopup.value.open();\n};\n\n// 关闭评论选项弹窗\nconst closePopup = () => {\n  commentOptionsPopup.value.close();\n};\n\n// 处理修改评论\nconst handleEdit = () => {\n  commentOptionsPopup.value.close();\n  \n  nextTick(() => {\n    editCommentPopup.value.open();\n  });\n};\n\n// 关闭修改评论弹窗\nconst closeEditPopup = () => {\n  editCommentPopup.value.close();\n};\n\n// 确认修改评论\nconst confirmEdit = async () => {\n  if (!editContent.value.trim()) {\n    uni.showToast({\n      title: '评论内容不能为空',\n      icon: 'none'\n    });\n    return;\n  }\n\n  emit('update', {\n    id: currentComment.value.id,\n    content: editContent.value.trim()\n  });\n  \n  editCommentPopup.value.close();\n};\n\n// 处理删除评论\nconst handleDelete = () => {\n  commentOptionsPopup.value.close();\n  \n  nextTick(() => {\n    deleteConfirmPopup.value.open();\n  });\n};\n\n// 关闭删除确认弹窗\nconst closeDeletePopup = () => {\n  deleteConfirmPopup.value.close();\n};\n\n// 确认删除评论\nconst confirmDelete = () => {\n  emit('delete', {\n    id: currentComment.value.id\n  });\n  \n  deleteConfirmPopup.value.close();\n};\n\n// 暴露方法给父组件\ndefineExpose({\n  open\n});\n</script>\n\n<style>\n.popup-content {\n  padding: 20rpx 0;\n  background-color: #fff;\n  border-radius: 16rpx 16rpx 0 0;\n}\n\n.popup-item {\n  height: 100rpx;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-bottom: 1rpx solid #f5f5f5;\n}\n\n.popup-text {\n  font-size: 32rpx;\n  color: #333;\n}\n\n.popup-item.cancel {\n  margin-top: 16rpx;\n}\n\n.cancel .popup-text {\n  color: #666;\n}\n</style>","import Component from 'C:/Users/ADMIN/Documents/HBuilderProjects/宝宝照片/components/CommentOptions.vue'\nwx.createComponent(Component)"],"names":["ref","nextTick","uni","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAuDA,UAAM,OAAO;AAGb,UAAM,sBAAsBA,cAAAA,IAAI,IAAI;AACpC,UAAM,mBAAmBA,cAAAA,IAAI,IAAI;AACjC,UAAM,qBAAqBA,cAAAA,IAAI,IAAI;AAGnC,UAAM,cAAcA,cAAAA,IAAI,EAAE;AAG1B,UAAM,iBAAiBA,cAAAA,IAAI,IAAI;AAG/B,UAAM,OAAO,CAAC,YAAY;AACxB,qBAAe,QAAQ;AACvB,kBAAY,QAAQ,QAAQ,WAAW;AACvC,0BAAoB,MAAM;IAC5B;AAGA,UAAM,aAAa,MAAM;AACvB,0BAAoB,MAAM;IAC5B;AAGA,UAAM,aAAa,MAAM;AACvB,0BAAoB,MAAM;AAE1BC,oBAAAA,WAAS,MAAM;AACb,yBAAiB,MAAM;MAC3B,CAAG;AAAA,IACH;AAGA,UAAM,iBAAiB,MAAM;AAC3B,uBAAiB,MAAM;IACzB;AAGA,UAAM,cAAc,YAAY;AAC9B,UAAI,CAAC,YAAY,MAAM,QAAQ;AAC7BC,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACZ,CAAK;AACD;AAAA,MACD;AAED,WAAK,UAAU;AAAA,QACb,IAAI,eAAe,MAAM;AAAA,QACzB,SAAS,YAAY,MAAM,KAAM;AAAA,MACrC,CAAG;AAED,uBAAiB,MAAM;IACzB;AAGA,UAAM,eAAe,MAAM;AACzB,0BAAoB,MAAM;AAE1BD,oBAAAA,WAAS,MAAM;AACb,2BAAmB,MAAM;MAC7B,CAAG;AAAA,IACH;AAGA,UAAM,mBAAmB,MAAM;AAC7B,yBAAmB,MAAM;IAC3B;AAGA,UAAM,gBAAgB,MAAM;AAC1B,WAAK,UAAU;AAAA,QACb,IAAI,eAAe,MAAM;AAAA,MAC7B,CAAG;AAED,yBAAmB,MAAM;IAC3B;AAGA,aAAa;AAAA,MACX;AAAA,IACF,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzID,GAAG,gBAAgBE,SAAS;"}